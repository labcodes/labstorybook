@use "sass:map";

$tag-font-size: 14px;
$tag-line-heigt: 20px;
$tag-border: 2px;

// pale
$tag-pale-color: map-get($tag-theme, "20");
$tag-text-color: map-get($tag-theme, "70");
$tag-hover-color: white;
$tag-hover-shadow-color: map-get($tag-theme, "20");
$tag-focus-shadow-color: map-get($tag-theme, "30");
$tag-focus-hover-bg-color: $tag-hover-color;

// vivid
$tag-vivid-color: map-get($tag-theme, "60");
$tag-vivid-hover-color: mix($tag-vivid-color, black, 50%);

/* variations */
.lab-tag {
  height: 24px;
  margin: $spacing-01; //think if this should be here or not
  padding: 0 $spacing-04;
  font-size: $tag-font-size;
  line-height: $tag-line-heigt;
  font-weight: $weight-bold;
  border-radius: 12px;
  border: $tag-border solid;
  text-decoration: none;
  transition: all $duration-base;
  outline: none;
  font-family: $font-primary;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  -webkit-font-smoothing: antialiased;
  
  &:focus {
    box-shadow: 0 0 0 2px $tag-focus-shadow-color;
  }

//disabled for all variations
  &.lab-tag--disabled {
    background-color: $mineral-10;
    color: $mineral-40;
    border-color: $mineral-10;
    pointer-events: none;

    .lab-tag__thumb {
      opacity: 0.5;
    }

    .lab-tag__left-icon,
    .lab-tag__right-icon {
      .lab-icon {
        background-color: $mineral-30;
      }
    }
  }
}

//togglable, removable & dropdown
.lab-tag__togglable, .lab-tag--has-right-icon {
  @extend .lab-tag;
  cursor: pointer;

  &:hover {
    box-shadow: 0 0 0 4px $tag-hover-shadow-color;
  }

  &:focus:hover {
    box-shadow: 0 0 0 2px $tag-focus-shadow-color, 0 0 0 4px $tag-hover-shadow-color;
    border-color: $tag-focus-hover-bg-color;
  }
}

/* Elements */
.lab-tag__thumb {
  position: relative;
  left: -$tag-border;
  width: 24px;
  height: 24px;
  border-radius: 12px;
  margin-right: calc(#{$spacing-02} - #{$tag-border});
}

.lab-tag__left-icon {
  display: flex;
  margin-right: $spacing-01;
}

.lab-tag__right-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: $spacing-02;
  width: 16px;
  height: 16px;

  &--remove {
    background-color: white;
    border-radius: 8px;
  }

  &--dropdown {
    padding-right: $spacing-02;
  }
}

/* Tag with elements */
.lab-tag--has-thumb {
  padding-left: 0;
}

.lab-tag--has-left-icon {
  padding-left: $spacing-01;
}

.lab-tag--has-right-icon { //entender como fazer pra posicionar isso
  padding-right: calc(#{$spacing-01} - #{$tag-border});
}

/* color styles */
.lab-tag__pale {
  background-color: $tag-pale-color;
  border-color: $tag-pale-color;
  color: $tag-text-color;

  .lab-icon {
    background-color: $tag-text-color;
  }

  &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
    background-color: $tag-hover-color;
    border-color: $tag-hover-color;

    .lab-tag__right-icon--remove {
      background-color: $tag-pale-color;
    }
  }

  &.lab-tag--outline {
    background-color: white;
    color: $tag-text-color;

    &:focus:hover {
      border-color: $tag-pale-color;
    }

    .lab-tag__thumb {
      border: 2px solid $tag-pale-color;
    }

    .lab-tag__right-icon--remove {
      background-color: $tag-pale-color;
    }

    &.lab-tag--disabled {
      color: $mineral-40;

      .lab-tag__right-icon--remove {
        background-color: $mineral-10;
      }
    }
  }
}

.lab-tag__vivid {
  border-color: $tag-vivid-color;
  background-color: $tag-vivid-color;
  color: white;

  .lab-icon {
    background-color: $white;
  }

  .lab-tag__right-icon--remove .lab-icon {
    background-color: $tag-vivid-color
  }

  &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
    background-color: $tag-vivid-hover-color;
    border-color: $tag-vivid-hover-color;
  }

  &.lab-tag--outline {
    background-color: white;
    border-color: $tag-vivid-color;
    color: $tag-text-color;

    .lab-icon {
      background-color: $tag-text-color;
    }

    .lab-tag__thumb {
      border: 2px solid $tag-text-color;
    }

    .lab-tag__right-icon--remove {
      background-color: $tag-pale-color;
    }

    &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
      background-color: white;
      border-color: $tag-text-color;
      color: $tag-text-color;
      box-shadow: 0 0 0 4px $tag-hover-shadow-color;

      .lab-icon {
        background-color: $tag-vivid-color;
      }
    }

    &:focus {
      border-color: $tag-hover-shadow-color;
      box-shadow: 0 0 0 2px $tag-focus-shadow-color;
    }

    &.lab-tag__togglable:focus:hover, &.lab-tag--has-right-icon:focus:hover {
      border-color: $tag-hover-shadow-color;
      box-shadow: 0 0 0 2px $tag-focus-shadow-color,
                  0 0 0 4px $tag-hover-shadow-color;
    }

    &.lab-tag--disabled {
      color: $mineral-40;
      border-color: $mineral-20;
    }
  }
}


/* Get skin colors from theme */
@each $name, $palette in $tag-main-colors {
  // pale FILL
  .lab-tag--#{$name}-pale {
    background-color: map-get($palette, "20");
    border-color: map-get($palette, "20");
    color: map-get($palette, "70");

    .lab-icon {
      background-color: map-get($palette, "70");
    }

    &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
      background-color: white;
      border-color: white;
      box-shadow: 0 0 0 4px map-get($palette, "20");

      .lab-tag__right-icon--remove {
        background-color: map-get($palette, "20");
      }
    }

    &.lab-tag__togglable:focus:hover, &.lab-tag--has-right-icon:focus:hover {
      border-color: map-get($palette, "20");
      box-shadow: 0 0 0 2px map-get($palette, "40"),
                  0 0 0 4px map-get($palette, "20");
    }

    &:focus {
      box-shadow: 0 0 0 2px map-get($palette, "30");
    }

    // pale OUTLINE
    &.lab-tag--outline {
      background-color: white;
      color: map-get($palette, "60");

      &:focus:hover {
        border-color: map-get($palette, "20");
      }

      .lab-tag__thumb {
        border: 2px solid map-get($palette, "20");
      }

      .lab-tag__right-icon--remove {
        background-color: map-get($palette, "20");
      }

      &.lab-tag--disabled {
        color: $mineral-40;
      }
    }
  }

// vivid FILL
  .lab-tag--#{$name}-vivid {
    border-color: map-get($palette, "60");
    background-color: map-get($palette, "60");
    color: white;

    .lab-icon {
      background-color: white;
    }

    .lab-tag__right-icon--remove .lab-icon {
      background-color: $tag-vivid-color;
      @if $name == "mineral" { background-color: map-get($palette, "70"); }
    }

    &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
      background-color: mix(map-get($palette, "60"), black, 50%);
      border-color: mix(map-get($palette, "60"), black, 50%);
      box-shadow: 0 0 0 4px map-get($palette, "20");
    }

    &.lab-tag__togglable:focus:hover, &.lab-tag--has-right-icon:focus:hover {
      box-shadow: 0 0 0 2px map-get($palette, "30"), 0 0 0 4px map-get($palette, "20");
      border-color: $tag-focus-hover-bg-color;
    }

    &:focus {
      box-shadow: 0 0 0 2px map-get($palette, "30");
    }

    // vivid OUTLINE
    &.lab-tag--outline {
      background-color: white;
      color: map-get($palette, "60");
      border-color: map-get($palette, "60");

      .lab-icon {
        background-color: map-get($palette, "60");
      }

      .lab-tag__thumb {
        border: 2px solid map-get($palette, "40");
      }

      .lab-tag__right-icon--remove {
        background-color: map-get($palette, "20");
      }

      &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
        background-color: white;
        color: map-get($palette, "60");
        border-color: map-get($palette, "40");
        box-shadow: 0 0 0 4px map-get($palette, "20");
      }

      &.lab-tag__togglable:focus:hover, &.lab-tag--has-right-icon:focus:hover {
        border-color: map-get($palette, "40");
        box-shadow: 0 0 0 2px map-get($palette, "30"),
                    0 0 0 4px map-get($palette, "20");
      }

      &.lab-tag--disabled {
        color: $mineral-40;
        border-color: $mineral-20;
      }
    }
  }
}

/* Get skin colors from messages & support color stacks */
// pale FILL
@each $name, $palette in $tag-all-colors {
  .lab-tag--#{$name}-pale {
    background-color: map-get($palette, "20");
    color: $black-75;
    border-color: map-get($palette, "20");

    .lab-icon {
      background-color: $black-75;
    }

    &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
      background-color: white;
      border-color: white;
      box-shadow: 0 0 0 4px map-get($palette, "20");

      .lab-tag__right-icon--remove {
        background-color: map-get($palette, "20");
      }
    }

    &:focus {
      box-shadow: 0 0 0 2px map-get($palette, "60");
    }

    &:focus:hover {
      box-shadow: 0 0 0 2px map-get($palette, "60"), 0 0 0 4px map-get($palette, "20");
    }

    // pale OUTLINE
    &.lab-tag--outline {
      background-color: white;
      color: map-get($palette, "60");
      @if $name == "yellow" { color: $mustard-70; }

      .lab-icon {
        background-color: map-get($palette, "60");
        @if $name == "yellow" { background-color: $mustard-70; }
      }

      .lab-tag__thumb {
        border: 2px solid map-get($palette, "20");
      }

      &:focus:hover {
        border-color: map-get($palette, "20");
      }

      .lab-tag__right-icon--remove {
        background-color: map-get($palette, "20");
      }

      &.lab-tag--disabled {
        color: $mineral-40;
      }
    }
  }

  .lab-tag--#{$name}-vivid {
    background-color: map-get($palette, "60");
    border-color: map-get($palette, "60");
    color: white;
    @if $name == "yellow" { color: $black-75; }
    
    &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
      background-color: mix(map-get($palette, "60"), black, 50%);
      border-color: mix(map-get($palette, "60"), black, 50%);
      box-shadow: 0 0 0 4px map-get($palette, "60");
      color: white;

      .lab-icon--dropdown-closed, .lab-icon--dropdown-open {
        @if $name == "yellow" { background-color: white; }
      }
    }

    &:focus {
      box-shadow: 0 0 0 2px map-get($palette, "60");
      border-color: map-get($palette, "20");
    }

    &:focus:hover {
      box-shadow: 0 0 0 2px map-get($palette, "20"), 0 0 0 4px map-get($palette, "60");
      border-color: mix(map-get($palette, "60"), black, 50%);
    }

    &:focus:hover {
      border-color: map-get($palette, "60");
    }

    .lab-icon {
      background-color: white;
      @if $name == "yellow" { background-color: $black-75; }
    }

    .lab-tag__right-icon--remove .lab-icon {
      background-color: $black-75;
    }
  // vivid OUTLINE
    &.lab-tag--outline {
      background-color: white;
      border-color: map-get($palette, "60");
      color: map-get($palette, "60");
      @if $name == "yellow" { color: $mustard-70; }

      .lab-icon {
        background-color: map-get($palette, "60");
        @if $name == "yellow" { background-color: $mustard-70; }
      }

      .lab-tag__right-icon--remove {
        background-color: map-get($palette, "20");
      }

      .lab-tag__thumb {
        border: 2px solid map-get($palette, "60");
      }

      &.lab-tag__togglable:hover, &.lab-tag--has-right-icon:hover {
        background-color: white;
        border-color: map-get($palette, "60");
        color: map-get($palette, "60");
        box-shadow: 0 0 0 4px map-get($palette, "20");
        @if $name == "yellow" { color: $mustard-70; }

        .lab-icon {
          background-color: map-get($palette, "60");
          @if $name == "yellow" { background-color: $mustard-70; }
        }
      }

      &:focus {
        border-color: map-get($palette, "20");
        box-shadow: 0 0 0 2px map-get($palette, "60");
      }

      &.lab-tag__togglable:focus:hover, &.lab-tag--has-right-icon:focus:hover {
        border-color: map-get($palette, "20");
        box-shadow: 0 0 0 2px map-get($palette, "60"),
                    0 0 0 4px map-get($palette, "20");
      }

      &.lab-tag--disabled {
        color: $mineral-40;
        border-color: $mineral-20;
      }
    }
  }
}
